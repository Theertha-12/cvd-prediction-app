{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\cvd-risk-project\\\\frontend\\\\cvd-risk-frontend\\\\src\\\\services\\\\predict.js\",\n  _s = $RefreshSig$();\n// 1. FIXED src/services/predict.js\nimport api from './api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const predictCvdRisk = async data => {\n  try {\n    // Transform frontend data to match backend schema\n    const transformedData = {\n      // Backend expects: sex (0/1), age, cigsPerDay, totChol, sysBP, diaBP, glucose\n      sex: data.gender === 'male' || data.gender === 'M' || data.gender === 1 ? 1 : 0,\n      age: parseInt(data.age),\n      cigsPerDay: parseInt(data.cigsPerDay || data.cigarettes || 0),\n      totChol: parseFloat(data.totChol || data.cholesterol),\n      sysBP: parseFloat(data.sysBP || data.systolic_bp || data.systolicBP),\n      diaBP: parseFloat(data.diaBP || data.diastolic_bp || data.diastolicBP),\n      glucose: parseFloat(data.glucose || data.bloodGlucose || 100) // Default if not provided\n    };\n\n    // Validate required fields\n    const requiredFields = ['sex', 'age', 'cigsPerDay', 'totChol', 'sysBP', 'diaBP', 'glucose'];\n    const missingFields = requiredFields.filter(field => transformedData[field] === undefined || transformedData[field] === null || isNaN(transformedData[field]));\n    if (missingFields.length > 0) {\n      throw new Error(`Missing or invalid fields: ${missingFields.join(', ')}`);\n    }\n    console.log('Sending transformed data:', transformedData);\n    const response = await api.post('/predict/single', transformedData);\n\n    // Return both the prediction result and the original form data\n    return {\n      ...response.data,\n      formData: data,\n      transformedData\n    };\n  } catch (error) {\n    console.error('❌ Prediction error:', error);\n\n    // Handle different error types\n    if (error.response) {\n      // API returned an error response\n      const errorData = error.response.data;\n      if (error.response.status === 422) {\n        // Validation error - extract detailed messages\n        let errorMessage = 'Validation Error: ';\n        if (errorData.detail) {\n          if (Array.isArray(errorData.detail)) {\n            // FastAPI validation errors\n            errorMessage += errorData.detail.map(err => `${err.loc ? err.loc.join('.') : 'Field'}: ${err.msg}`).join(', ');\n          } else if (typeof errorData.detail === 'string') {\n            errorMessage += errorData.detail;\n          }\n        }\n        const validationError = new Error(errorMessage);\n        validationError.isValidation = true;\n        validationError.details = errorData.detail;\n        throw validationError;\n      }\n      throw new Error(errorData.detail || errorData.message || 'API request failed');\n    }\n\n    // Network or other errors\n    throw error;\n  }\n};\nexport const getPredictionHistory = async (limit = 10) => {\n  const response = await api.get('/predict/history', {\n    params: {\n      limit\n    }\n  });\n  return response.data;\n};\nexport const processBatchPrediction = async formData => {\n  const response = await api.post('/batch/predict-csv', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n  return response.data;\n};\nexport const savePredictionResult = async predictionId => {\n  const response = await api.post(`/predict/save/${predictionId}`);\n  return response.data;\n};\nexport const downloadPredictionReport = async predictionId => {\n  const response = await api.get(`/predict/report/${predictionId}`, {\n    responseType: 'blob'\n  });\n  return response.data;\n};\n\n// 2. FIXED Error Display Component for React\nexport const ErrorDisplay = ({\n  error,\n  onRetry\n}) => {\n  if (!error) return null;\n  const renderError = () => {\n    // Handle validation errors\n    if (error.isValidation && error.details) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-50 border border-red-200 rounded-lg p-4 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-5 w-5 text-red-400\",\n              viewBox: \"0 0 20 20\",\n              fill: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                fillRule: \"evenodd\",\n                d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n                clipRule: \"evenodd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm font-medium text-red-800\",\n              children: \"Please check your input data:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm text-red-700\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-disc list-inside space-y-1\",\n                children: Array.isArray(error.details) ? error.details.map((detail, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [detail.loc ? detail.loc.join('.') : 'Field', \":\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 23\n                  }, this), \" \", detail.msg]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 21\n                }, this)) : /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: error.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), onRetry && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onRetry,\n            className: \"bg-red-600 text-white px-4 py-2 rounded-md text-sm hover:bg-red-700\",\n            children: \"Try Again\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this);\n    }\n\n    // Handle general errors\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-50 border border-red-200 rounded-lg p-4 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-shrink-0\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-5 w-5 text-red-400\",\n            viewBox: \"0 0 20 20\",\n            fill: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-medium text-red-800\",\n            children: \"Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-sm text-red-700\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: error.message || 'Something went wrong. Please try again.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), onRetry && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onRetry,\n          className: \"bg-red-600 text-white px-4 py-2 rounded-md text-sm hover:bg-red-700\",\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this);\n  };\n  return renderError();\n};\n\n// 3. EXAMPLE: How to use in your components\n_c = ErrorDisplay;\nexport const ExampleUsage = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n  const handleSubmit = async formData => {\n    try {\n      setLoading(true);\n      setError(null);\n      const prediction = await predictCvdRisk(formData);\n      setResult(prediction);\n    } catch (err) {\n      console.error('Prediction failed:', err);\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleRetry = () => {\n    setError(null);\n    // Optionally trigger form resubmission\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(ErrorDisplay, {\n      error: error,\n      onRetry: handleRetry\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }, this), result && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Success! Risk: \", result.risk_percentage, \"%\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 5\n  }, this);\n};\n\n// 4. FIELD MAPPING REFERENCE\n_s(ExampleUsage, \"lsFgjoVEooRpc0nyFvPNDendyrQ=\");\n_c2 = ExampleUsage;\nexport const FIELD_MAPPINGS = {\n  // Frontend field -> Backend field\n  gender: 'sex',\n  // Convert 'male'/'female' to 1/0\n  age: 'age',\n  // Direct mapping\n  cigarettes: 'cigsPerDay',\n  cigsPerDay: 'cigsPerDay',\n  cholesterol: 'totChol',\n  totChol: 'totChol',\n  systolic_bp: 'sysBP',\n  systolicBP: 'sysBP',\n  sysBP: 'sysBP',\n  diastolic_bp: 'diaBP',\n  diastolicBP: 'diaBP',\n  diaBP: 'diaBP',\n  bloodGlucose: 'glucose',\n  glucose: 'glucose'\n};\n\n// 5. VALIDATION HELPER\nexport const validatePredictionData = data => {\n  const errors = [];\n  if (!data.age || data.age < 18 || data.age > 120) {\n    errors.push('Age must be between 18 and 120');\n  }\n  if (!data.gender && data.sex === undefined) {\n    errors.push('Gender is required');\n  }\n  if (!data.cholesterol && !data.totChol) {\n    errors.push('Cholesterol level is required');\n  }\n  if (!data.systolic_bp && !data.sysBP && !data.systolicBP) {\n    errors.push('Systolic blood pressure is required');\n  }\n  if (!data.diastolic_bp && !data.diaBP && !data.diastolicBP) {\n    errors.push('Diastolic blood pressure is required');\n  }\n  return errors;\n};\nvar _c, _c2;\n$RefreshReg$(_c, \"ErrorDisplay\");\n$RefreshReg$(_c2, \"ExampleUsage\");","map":{"version":3,"names":["api","jsxDEV","_jsxDEV","predictCvdRisk","data","transformedData","sex","gender","age","parseInt","cigsPerDay","cigarettes","totChol","parseFloat","cholesterol","sysBP","systolic_bp","systolicBP","diaBP","diastolic_bp","diastolicBP","glucose","bloodGlucose","requiredFields","missingFields","filter","field","undefined","isNaN","length","Error","join","console","log","response","post","formData","error","errorData","status","errorMessage","detail","Array","isArray","map","err","loc","msg","validationError","isValidation","details","message","getPredictionHistory","limit","get","params","processBatchPrediction","headers","savePredictionResult","predictionId","downloadPredictionReport","responseType","ErrorDisplay","onRetry","renderError","className","children","viewBox","fill","fillRule","d","clipRule","fileName","_jsxFileName","lineNumber","columnNumber","index","onClick","_c","ExampleUsage","_s","setError","useState","loading","setLoading","result","setResult","handleSubmit","prediction","handleRetry","risk_percentage","_c2","FIELD_MAPPINGS","validatePredictionData","errors","push","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/cvd-risk-project/frontend/cvd-risk-frontend/src/services/predict.js"],"sourcesContent":["// 1. FIXED src/services/predict.js\r\nimport api from './api';\r\n\r\nexport const predictCvdRisk = async (data) => {\r\n  try {\r\n    // Transform frontend data to match backend schema\r\n    const transformedData = {\r\n      // Backend expects: sex (0/1), age, cigsPerDay, totChol, sysBP, diaBP, glucose\r\n      sex: data.gender === 'male' || data.gender === 'M' || data.gender === 1 ? 1 : 0,\r\n      age: parseInt(data.age),\r\n      cigsPerDay: parseInt(data.cigsPerDay || data.cigarettes || 0),\r\n      totChol: parseFloat(data.totChol || data.cholesterol),\r\n      sysBP: parseFloat(data.sysBP || data.systolic_bp || data.systolicBP),\r\n      diaBP: parseFloat(data.diaBP || data.diastolic_bp || data.diastolicBP),\r\n      glucose: parseFloat(data.glucose || data.bloodGlucose || 100) // Default if not provided\r\n    };\r\n\r\n    // Validate required fields\r\n    const requiredFields = ['sex', 'age', 'cigsPerDay', 'totChol', 'sysBP', 'diaBP', 'glucose'];\r\n    const missingFields = requiredFields.filter(field => \r\n      transformedData[field] === undefined || \r\n      transformedData[field] === null || \r\n      isNaN(transformedData[field])\r\n    );\r\n\r\n    if (missingFields.length > 0) {\r\n      throw new Error(`Missing or invalid fields: ${missingFields.join(', ')}`);\r\n    }\r\n\r\n    console.log('Sending transformed data:', transformedData);\r\n    \r\n    const response = await api.post('/predict/single', transformedData);\r\n    \r\n    // Return both the prediction result and the original form data\r\n    return {\r\n      ...response.data,\r\n      formData: data,\r\n      transformedData\r\n    };\r\n  } catch (error) {\r\n    console.error('❌ Prediction error:', error);\r\n    \r\n    // Handle different error types\r\n    if (error.response) {\r\n      // API returned an error response\r\n      const errorData = error.response.data;\r\n      \r\n      if (error.response.status === 422) {\r\n        // Validation error - extract detailed messages\r\n        let errorMessage = 'Validation Error: ';\r\n        \r\n        if (errorData.detail) {\r\n          if (Array.isArray(errorData.detail)) {\r\n            // FastAPI validation errors\r\n            errorMessage += errorData.detail.map(err => \r\n              `${err.loc ? err.loc.join('.') : 'Field'}: ${err.msg}`\r\n            ).join(', ');\r\n          } else if (typeof errorData.detail === 'string') {\r\n            errorMessage += errorData.detail;\r\n          }\r\n        }\r\n        \r\n        const validationError = new Error(errorMessage);\r\n        validationError.isValidation = true;\r\n        validationError.details = errorData.detail;\r\n        throw validationError;\r\n      }\r\n      \r\n      throw new Error(errorData.detail || errorData.message || 'API request failed');\r\n    }\r\n    \r\n    // Network or other errors\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getPredictionHistory = async (limit = 10) => {\r\n  const response = await api.get('/predict/history', { params: { limit } });\r\n  return response.data;\r\n};\r\n\r\nexport const processBatchPrediction = async (formData) => {\r\n  const response = await api.post('/batch/predict-csv', formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    }\r\n  });\r\n  return response.data;\r\n};\r\n\r\nexport const savePredictionResult = async (predictionId) => {\r\n  const response = await api.post(`/predict/save/${predictionId}`);\r\n  return response.data;\r\n};\r\n\r\nexport const downloadPredictionReport = async (predictionId) => {\r\n  const response = await api.get(`/predict/report/${predictionId}`, {\r\n    responseType: 'blob'\r\n  });\r\n  return response.data;\r\n};\r\n\r\n// 2. FIXED Error Display Component for React\r\nexport const ErrorDisplay = ({ error, onRetry }) => {\r\n  if (!error) return null;\r\n  \r\n  const renderError = () => {\r\n    // Handle validation errors\r\n    if (error.isValidation && error.details) {\r\n      return (\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-4\">\r\n          <div className=\"flex\">\r\n            <div className=\"flex-shrink-0\">\r\n              <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <h3 className=\"text-sm font-medium text-red-800\">\r\n                Please check your input data:\r\n              </h3>\r\n              <div className=\"mt-2 text-sm text-red-700\">\r\n                <ul className=\"list-disc list-inside space-y-1\">\r\n                  {Array.isArray(error.details) ? error.details.map((detail, index) => (\r\n                    <li key={index}>\r\n                      <strong>{detail.loc ? detail.loc.join('.') : 'Field'}:</strong> {detail.msg}\r\n                    </li>\r\n                  )) : (\r\n                    <li>{error.message}</li>\r\n                  )}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {onRetry && (\r\n            <div className=\"mt-4\">\r\n              <button\r\n                onClick={onRetry}\r\n                className=\"bg-red-600 text-white px-4 py-2 rounded-md text-sm hover:bg-red-700\"\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    // Handle general errors\r\n    return (\r\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-4\">\r\n        <div className=\"flex\">\r\n          <div className=\"flex-shrink-0\">\r\n            <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n          </div>\r\n          <div className=\"ml-3\">\r\n            <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\r\n            <div className=\"mt-2 text-sm text-red-700\">\r\n              <p>{error.message || 'Something went wrong. Please try again.'}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {onRetry && (\r\n          <div className=\"mt-4\">\r\n            <button\r\n              onClick={onRetry}\r\n              className=\"bg-red-600 text-white px-4 py-2 rounded-md text-sm hover:bg-red-700\"\r\n            >\r\n              Try Again\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n  \r\n  return renderError();\r\n};\r\n\r\n// 3. EXAMPLE: How to use in your components\r\nexport const ExampleUsage = () => {\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [result, setResult] = useState(null);\r\n\r\n  const handleSubmit = async (formData) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const prediction = await predictCvdRisk(formData);\r\n      setResult(prediction);\r\n      \r\n    } catch (err) {\r\n      console.error('Prediction failed:', err);\r\n      setError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRetry = () => {\r\n    setError(null);\r\n    // Optionally trigger form resubmission\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ErrorDisplay error={error} onRetry={handleRetry} />\r\n      {loading && <div>Loading...</div>}\r\n      {result && <div>Success! Risk: {result.risk_percentage}%</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\n// 4. FIELD MAPPING REFERENCE\r\nexport const FIELD_MAPPINGS = {\r\n  // Frontend field -> Backend field\r\n  gender: 'sex',        // Convert 'male'/'female' to 1/0\r\n  age: 'age',           // Direct mapping\r\n  cigarettes: 'cigsPerDay',\r\n  cigsPerDay: 'cigsPerDay',\r\n  cholesterol: 'totChol',\r\n  totChol: 'totChol',\r\n  systolic_bp: 'sysBP',\r\n  systolicBP: 'sysBP',\r\n  sysBP: 'sysBP',\r\n  diastolic_bp: 'diaBP',\r\n  diastolicBP: 'diaBP',\r\n  diaBP: 'diaBP',\r\n  bloodGlucose: 'glucose',\r\n  glucose: 'glucose'\r\n};\r\n\r\n// 5. VALIDATION HELPER\r\nexport const validatePredictionData = (data) => {\r\n  const errors = [];\r\n  \r\n  if (!data.age || data.age < 18 || data.age > 120) {\r\n    errors.push('Age must be between 18 and 120');\r\n  }\r\n  \r\n  if (!data.gender && data.sex === undefined) {\r\n    errors.push('Gender is required');\r\n  }\r\n  \r\n  if (!data.cholesterol && !data.totChol) {\r\n    errors.push('Cholesterol level is required');\r\n  }\r\n  \r\n  if (!data.systolic_bp && !data.sysBP && !data.systolicBP) {\r\n    errors.push('Systolic blood pressure is required');\r\n  }\r\n  \r\n  if (!data.diastolic_bp && !data.diaBP && !data.diastolicBP) {\r\n    errors.push('Diastolic blood pressure is required');\r\n  }\r\n  \r\n  return errors;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}